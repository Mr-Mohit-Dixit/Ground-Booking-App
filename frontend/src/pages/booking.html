<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ground Booking Form</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Main Form Container -->
    <div class="max-w-md w-full bg-white rounded-xl shadow-lg p-8 space-y-6">
        <h2 class="text-3xl font-bold text-gray-800 text-center">Book a Ground</h2>
        
        <form id="bookingForm" class="space-y-6">
            
            <!-- Sport Selection -->
            <div>
                <label for="sport" class="block text-sm font-medium text-gray-700">Select Sport</label>
                <select id="sport" name="sport" required
                    class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
                    <option value="">-- Select a Sport --</option>
                </select>
            </div>

            <!-- Ground Selection -->
            <div>
                <label for="ground" class="block text-sm font-medium text-gray-700">Select Ground</label>
                <select id="ground" name="ground" required disabled
                    class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed">
                    <option value="">-- Select a Ground --</option>
                </select>
            </div>

            <!-- Rate per Hour -->
            <div>
                <label for="rate" class="block text-sm font-medium text-gray-700">Rate per Hour</label>
                <div class="mt-1 flex rounded-md shadow-sm">
                    <span class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-200 text-gray-500 text-sm">
                        $
                    </span>
                    <input type="text" id="rate" name="rate" readonly value="0.00"
                        class="flex-1 block w-full rounded-none rounded-r-lg px-4 py-2 border border-gray-300 bg-gray-50 read-only:bg-gray-200 read-only:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>
            </div>

            <!-- Time Selection -->
            <div class="flex space-x-4">
                <div class="flex-1">
                    <label for="startTime" class="block text-sm font-medium text-gray-700">Start Time</label>
                    <select id="startTime" name="startTime" required
                        class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
                        <option value="">-- Select Time --</option>
                    </select>
                </div>
                <div class="flex-1">
                    <label for="endTime" class="block text-sm font-medium text-gray-700">End Time</label>
                    <select id="endTime" name="endTime" required
                        class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
                        <option value="">-- Select Time --</option>
                    </select>
                </div>
            </div>
            
            <!-- Total Amount Display -->
            <div class="text-right text-lg font-bold text-gray-800">
                Total Amount: <span id="totalAmount">$0.00</span>
            </div>

            <!-- Booking Button -->
            <button type="submit"
                class="w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out">
                Book Now
            </button>
        </form>

        <!-- Message Box -->
        <div id="messageBox" class="mt-4 hidden p-4 rounded-lg text-center font-semibold" role="alert"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Dummy data for sports, grounds, and rates
            const bookingData = {
                'Football': [
                    { name: 'Field A', rate: 50 },
                    { name: 'Field B', rate: 60 }
                ],
                'Cricket': [
                    { name: 'Pitch 1', rate: 45 },
                    { name: 'Pitch 2', rate: 55 }
                ],
                'Badminton': [
                    { name: 'Court 1', rate: 25 },
                    { name: 'Court 2', rate: 30 }
                ]
            };

            const form = document.getElementById('bookingForm');
            const sportSelect = document.getElementById('sport');
            const groundSelect = document.getElementById('ground');
            const rateInput = document.getElementById('rate');
            const startTimeSelect = document.getElementById('startTime');
            const endTimeSelect = document.getElementById('endTime');
            const totalAmountSpan = document.getElementById('totalAmount');
            const messageBox = document.getElementById('messageBox');

            // Populate sports dropdown
            Object.keys(bookingData).forEach(sport => {
                const option = document.createElement('option');
                option.value = sport;
                option.textContent = sport;
                sportSelect.appendChild(option);
            });

            // Generate time slots (from 6:00 to 22:00 in 30-minute intervals)
            const timeSlots = [];
            for (let hour = 6; hour <= 22; hour++) {
                const hourFormatted = String(hour).padStart(2, '0');
                timeSlots.push(`${hourFormatted}:00`);
                if (hour < 22) {
                    timeSlots.push(`${hourFormatted}:30`);
                }
            }
            timeSlots.forEach(time => {
                const startOption = document.createElement('option');
                startOption.value = time;
                startOption.textContent = time;
                startTimeSelect.appendChild(startOption);

                const endOption = document.createElement('option');
                endOption.value = time;
                endOption.textContent = time;
                endTimeSelect.appendChild(endOption);
            });

            // Event listener for sport change
            sportSelect.addEventListener('change', () => {
                const selectedSport = sportSelect.value;
                groundSelect.innerHTML = '<option value="">-- Select a Ground --</option>';
                groundSelect.disabled = true;
                rateInput.value = '0.00';
                totalAmountSpan.textContent = '$0.00';
                
                if (selectedSport) {
                    bookingData[selectedSport].forEach(ground => {
                        const option = document.createElement('option');
                        option.value = ground.name;
                        option.textContent = ground.name;
                        option.setAttribute('data-rate', ground.rate);
                        groundSelect.appendChild(option);
                    });
                    groundSelect.disabled = false;
                }
            });

            // Event listener for ground change
            groundSelect.addEventListener('change', () => {
                const selectedOption = groundSelect.options[groundSelect.selectedIndex];
                const rate = selectedOption ? selectedOption.getAttribute('data-rate') : '0.00';
                rateInput.value = parseFloat(rate).toFixed(2);
                calculateTotal();
            });

            // Event listener for time changes
            startTimeSelect.addEventListener('change', calculateTotal);
            endTimeSelect.addEventListener('change', calculateTotal);

            function calculateTotal() {
                const startTimeValue = startTimeSelect.value;
                const endTimeValue = endTimeSelect.value;
                const rate = parseFloat(rateInput.value);

                if (!startTimeValue || !endTimeValue || isNaN(rate) || rate === 0) {
                    totalAmountSpan.textContent = '$0.00';
                    return;
                }

                const startTimeParts = startTimeValue.split(':').map(Number);
                const endTimeParts = endTimeValue.split(':').map(Number);
                const startMinutes = startTimeParts[0] * 60 + startTimeParts[1];
                const endMinutes = endTimeParts[0] * 60 + endTimeParts[1];

                if (endMinutes <= startMinutes) {
                    // Display an error or simply reset the amount
                    totalAmountSpan.textContent = '$0.00';
                    return;
                }
                
                const durationHours = (endMinutes - startMinutes) / 60;
                const totalAmount = rate * durationHours;
                totalAmountSpan.textContent = `$${totalAmount.toFixed(2)}`;
            }

            // Form submission handler
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(form);
                const bookingData = Object.fromEntries(formData.entries());
                const startTimeValue = startTimeSelect.value;
                const endTimeValue = endTimeSelect.value;
                const startTimeParts = startTimeValue.split(':').map(Number);
                const endTimeParts = endTimeValue.split(':').map(Number);
                const startMinutes = startTimeParts[0] * 60 + startTimeParts[1];
                const endMinutes = endTimeParts[0] * 60 + endTimeParts[1];

                if (endMinutes <= startMinutes) {
                    showMessage('End time must be after start time.', 'bg-red-100 text-red-700');
                    return;
                }

                // Add the calculated total amount
                bookingData.totalAmount = totalAmountSpan.textContent;

                console.log('Booking details:', bookingData);
                showMessage('Booking successful! Details logged to the console.', 'bg-green-100 text-green-700');
            });
            
            function showMessage(msg, style) {
                messageBox.textContent = msg;
                messageBox.className = `mt-4 p-4 rounded-lg text-center font-semibold ${style}`;
                messageBox.classList.remove('hidden');
                setTimeout(() => {
                    messageBox.classList.add('hidden');
                }, 5000);
            }
        });
    </script>
</body>
</html>

{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Ground-Booking-App\\\\frontend\\\\src\\\\pages\\\\MyBookings.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport '../Styles/myBookings.css';\nimport PlayerNavbar from '../components/PlayerNavbar';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MyBookings = () => {\n  _s();\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchMyBookings = async () => {\n      setLoading(true);\n      setError(null);\n      const loggedInUserId = localStorage.getItem(\"loggeduserid\");\n      if (!loggedInUserId) {\n        setError(\"User not logged in. Please log in to view your bookings.\");\n        setLoading(false);\n        return;\n      }\n      try {\n        // Corrected endpoint to match the backend controller\n        const response = await axios.get(`http://localhost:8080/api/bookings/user/${loggedInUserId}`);\n        if (Array.isArray(response.data) && response.data.length > 0) {\n          // Fetch ground names for each booking\n          const bookingsWithGroundNames = await Promise.all(response.data.map(async booking => {\n            try {\n              const groundResponse = await axios.get(`http://localhost:8080/api/grounds/getById/${booking.gId}`);\n              return {\n                ...booking,\n                ground: groundResponse.data // Attach the full ground object\n              };\n            } catch (groundError) {\n              console.error(`Error fetching ground for gId ${booking.gId}:`, groundError);\n              return {\n                ...booking,\n                ground: {\n                  gName: \"Ground Not Found\"\n                } // Fallback if ground data is missing\n              };\n            }\n          }));\n          setBookings(bookingsWithGroundNames);\n        } else {\n          setBookings([]);\n        }\n      } catch (err) {\n        console.error(\"Error fetching bookings:\", err);\n        setError(\"Failed to fetch bookings. Please ensure the backend is running and the API endpoint is correct.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchMyBookings();\n  }, []);\n  if (loading || error) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(PlayerNavbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"myBookings-container\",\n        children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-message\",\n          children: \"Loading your bookings...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 33\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PlayerNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"myBookings-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), bookings.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-bookings-message\",\n        children: \"You have no bookings yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bookings-table-container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ground Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Time From\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Time To\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: bookings.map(booking => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: booking.ground.gName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: new Date(booking.bDateTime).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: booking.timeFrom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: booking.timeTo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"\\u20B9 \", booking.bAmt]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 41\n              }, this)]\n            }, booking.bId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(MyBookings, \"PAEPq2PViva62REBsNTRmIygMHA=\");\n_c = MyBookings;\nexport default MyBookings;\nvar _c;\n$RefreshReg$(_c, \"MyBookings\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","PlayerNavbar","jsxDEV","_jsxDEV","Fragment","_Fragment","MyBookings","_s","bookings","setBookings","loading","setLoading","error","setError","fetchMyBookings","loggedInUserId","localStorage","getItem","response","get","Array","isArray","data","length","bookingsWithGroundNames","Promise","all","map","booking","groundResponse","gId","ground","groundError","console","gName","err","children","fileName","_jsxFileName","lineNumber","columnNumber","className","Date","bDateTime","toLocaleDateString","timeFrom","timeTo","bAmt","bId","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Ground-Booking-App/frontend/src/pages/MyBookings.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport '../Styles/myBookings.css'; \r\nimport PlayerNavbar from '../components/PlayerNavbar'; \r\n\r\nconst MyBookings = () => {\r\n    const [bookings, setBookings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchMyBookings = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n            const loggedInUserId = localStorage.getItem(\"loggeduserid\");\r\n\r\n            if (!loggedInUserId) {\r\n                setError(\"User not logged in. Please log in to view your bookings.\");\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Corrected endpoint to match the backend controller\r\n                const response = await axios.get(`http://localhost:8080/api/bookings/user/${loggedInUserId}`);\r\n                \r\n                if (Array.isArray(response.data) && response.data.length > 0) {\r\n                    // Fetch ground names for each booking\r\n                    const bookingsWithGroundNames = await Promise.all(\r\n                        response.data.map(async (booking) => {\r\n                            try {\r\n                                const groundResponse = await axios.get(`http://localhost:8080/api/grounds/getById/${booking.gId}`);\r\n                                return {\r\n                                    ...booking,\r\n                                    ground: groundResponse.data // Attach the full ground object\r\n                                };\r\n                            } catch (groundError) {\r\n                                console.error(`Error fetching ground for gId ${booking.gId}:`, groundError);\r\n                                return {\r\n                                    ...booking,\r\n                                    ground: { gName: \"Ground Not Found\" } // Fallback if ground data is missing\r\n                                };\r\n                            }\r\n                        })\r\n                    );\r\n                    setBookings(bookingsWithGroundNames);\r\n                } else {\r\n                    setBookings([]);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Error fetching bookings:\", err);\r\n                setError(\"Failed to fetch bookings. Please ensure the backend is running and the API endpoint is correct.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchMyBookings();\r\n    }, []);\r\n\r\n    if (loading || error) {\r\n        return (\r\n            <>\r\n                <PlayerNavbar />\r\n                <div className=\"myBookings-container\"> \r\n                    {loading && <div className=\"loading-message\">Loading your bookings...</div>}\r\n                    {error && <div className=\"error-message\">{error}</div>}\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <PlayerNavbar />\r\n            <div className=\"myBookings-container\"> \r\n                <h2>My Bookings</h2>\r\n                {bookings.length === 0 ? (\r\n                    <p className=\"no-bookings-message\">You have no bookings yet.</p>\r\n                ) : (\r\n                    <div className=\"bookings-table-container\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Ground Name</th>\r\n                                    <th>Date</th>\r\n                                    <th>Time From</th>\r\n                                    <th>Time To</th>\r\n                                    <th>Amount</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {bookings.map((booking) => (\r\n                                    <tr key={booking.bId}>\r\n                                        <td>{booking.ground.gName}</td>\r\n                                        <td>{new Date(booking.bDateTime).toLocaleDateString()}</td>\r\n                                        <td>{booking.timeFrom}</td>\r\n                                        <td>{booking.timeTo}</td>\r\n                                        <td>â‚¹ {booking.bAmt}</td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default MyBookings;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}